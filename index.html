<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>Happy Birthday My Love Sameekshya 💖</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800&family=Parisienne&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1: #0f0727;
      --bg2: #4c1d95;
      --bg3: #ec4899;
      --card: rgba(255,255,255,0.08);
      --accent: #ff6b9d;
      --gold: #ffd166;
      --rose: #ff69b4;
      --lavender: #e879f9;
    }
    
    *{box-sizing: border-box}
    html,body{height:100%;margin:0;font-family:Montserrat, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}

    body{
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      color: #fff;
      -webkit-font-smoothing:antialiased;
      overflow-x:hidden;
      min-height:100vh;
      /* Disable text selection for better touch experience */
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /* Simplified floating hearts - fewer elements */
    .floating-hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }

    .heart {
      position: absolute;
      color: var(--rose);
      font-size: 16px;
      opacity: 0.6;
      animation: floatUp 10s linear infinite;
      will-change: transform;
    }

    @keyframes floatUp {
      0% {
        transform: translateY(100vh) translateX(0);
        opacity: 0;
      }
      10% {
        opacity: 0.6;
      }
      90% {
        opacity: 0.6;
      }
      100% {
        transform: translateY(-100px) translateX(20px);
        opacity: 0;
      }
    }

    /* Main container */
    .stage{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:1rem;
      position:relative;
      z-index:2;
    }

    .card{
      width:100%;
      max-width:900px;
      border-radius:20px;
      padding:1.5rem;
      backdrop-filter: blur(10px);
      background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      box-shadow: 0 15px 40px rgba(2,6,23,0.7);
      position:relative;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .hero{
      display:flex;
      gap:1.5rem;
      align-items:center;
      flex-wrap:wrap;
    }

    .left{
      flex:1 1 100%;
      min-width:280px;
      position:relative;
      order:2;
    }

    .love-message {
      font-family: 'Dancing Script', cursive;
      font-size: clamp(16px, 4vw, 20px);
      color: var(--lavender);
      margin-bottom: 0.5rem;
      font-weight: 700;
      text-align: center;
    }

    .big-text{
      font-size: clamp(28px, 8vw, 64px);
      line-height:0.95;
      font-weight:800;
      letter-spacing: -1px;
      margin:0.5rem 0;
      background: linear-gradient(135deg, #fff, var(--gold), var(--rose));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-align: center;
    }

    .script{
      font-family: 'Parisienne', cursive;
      font-size: clamp(20px, 5vw, 38px);
      color: var(--gold);
      display:block;
      margin-bottom:0.8rem;
      text-align: center;
    }

    .sub{
      color: #f1f5f9;
      opacity:0.95;
      margin-top:1rem;
      font-size:clamp(14px,3.5vw,17px);
      line-height: 1.6;
      text-align: center;
      padding: 0 0.5rem;
    }

    .right{
      flex:1 1 100%;
      order:1;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      margin-bottom:1rem;
    }

    .photo-frame{
      width:200px;
      height:200px;
      border-radius:20px;
      overflow:hidden;
      border:3px solid rgba(255,255,255,0.15);
      box-shadow: 0 12px 30px rgba(0,0,0,0.4);
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(180deg, rgba(255,255,255,0.05), rgba(0,0,0,0.02));
      position: relative;
    }

    .photo-frame::before {
      content: '';
      position: absolute;
      inset: -2px;
      background: linear-gradient(45deg, var(--rose), var(--lavender), var(--gold));
      border-radius: 22px;
      z-index: -1;
      opacity: 0.6;
    }

    .photo-frame img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .controls{
      margin-top:1rem;
      display:flex;
      gap:0.6rem;
      flex-wrap:wrap;
      justify-content:center;
      align-items:center;
    }

    .btn{
      background:linear-gradient(135deg, var(--accent), #ff9fbf);
      border:none;
      padding:12px 18px;
      border-radius:12px;
      color:#111;
      font-weight:700;
      cursor:pointer;
      box-shadow:0 6px 16px rgba(0,0,0,0.3);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      font-size: clamp(12px, 3vw, 14px);
      min-height: 48px;
      white-space: nowrap;
      /* Better touch targets */
      min-width: 48px;
      -webkit-tap-highlight-color: transparent;
    }
    
    .btn:active {
      transform: scale(0.95);
    }
    
    .btn.ghost{
      background:transparent;
      color:#fff;
      border:1px solid rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
    }

    .button-row {
      display: flex;
      gap: 0.8rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 1rem;
    }

    /* Optimized confetti canvas */
    canvas#confetti{
      position:fixed;
      inset:0;
      z-index:3;
      pointer-events:none;
      /* Hardware acceleration */
      transform: translateZ(0);
    }

    /* Simplified balloons */
    .balloons{
      position:absolute;
      bottom:-15px;
      left:8px;
      z-index:4;
      display:flex;
      gap:8px;
    }
    
    .balloon{
      width:35px;
      height:50px;
      border-radius:50% 50% 46% 46%;
      position:relative;
      animation: float 6s ease-in-out infinite;
      /* Reduce repaints */
      will-change: transform;
    }
    
    .balloon::after{
      content:'';
      position:absolute;
      left:50%;
      bottom:-15px;
      width:1px;
      height:15px;
      background:rgba(255,255,255,0.15);
      transform:translateX(-50%);
    }
    
    .balloon:nth-child(1){background:linear-gradient(180deg,#ff9fb1,#ff6b6b);animation-delay:0s}
    .balloon:nth-child(2){background:linear-gradient(180deg,#ffd6a5,#ffb86b);animation-delay:1s}
    .balloon:nth-child(3){background:linear-gradient(180deg,#caffbf,#6ef0a6);animation-delay:2s}

    @keyframes float{
      0%{transform:translateY(0)}
      50%{transform:translateY(-6px)}
      100%{transform:translateY(0)}
    }

    /* Love notes popup */
    .love-notes {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, rgba(0,0,0,0.95), rgba(76, 29, 149, 0.95));
      backdrop-filter: blur(20px);
      border-radius: 16px;
      padding: 1.5rem;
      max-width: 340px;
      width: 90%;
      text-align: center;
      z-index: 100;
      border: 1px solid rgba(255,255,255,0.2);
      display: none;
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
    }

    .love-notes h3 {
      color: var(--rose);
      font-family: 'Dancing Script', cursive;
      font-size: clamp(22px, 6vw, 26px);
      margin-bottom: 1rem;
    }

    .love-notes p {
      color: #f1f5f9;
      line-height: 1.6;
      margin-bottom: 1.5rem;
      font-style: italic;
      font-size: clamp(14px, 3.5vw, 16px);
    }

    .close-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      min-height: 48px;
      -webkit-tap-highlight-color: transparent;
    }

    /* Memory timeline */
    .timeline {
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .timeline h3 {
      font-family: 'Dancing Script', cursive;
      font-size: clamp(20px, 5vw, 24px);
      color: var(--gold);
      text-align: center;
      margin-bottom: 1rem;
    }

    .memory-item {
      background: rgba(255,255,255,0.05);
      padding: 1rem;
      border-radius: 12px;
      margin-bottom: 0.8rem;
      border-left: 3px solid var(--rose);
      backdrop-filter: blur(10px);
    }

    .memory-date {
      color: var(--lavender);
      font-size: clamp(11px, 3vw, 12px);
      font-weight: 600;
    }

    .memory-text {
      color: #f1f5f9;
      font-size: clamp(13px, 3.5vw, 14px);
      margin-top: 0.3rem;
      line-height: 1.5;
    }

    /* Mobile optimizations */
    @media (max-width: 768px) {
      .stage { 
        padding: 0.5rem; 
      }
      
      .card { 
        padding: 1rem; 
        border-radius: 16px; 
        margin: 0.5rem;
        backdrop-filter: blur(5px); /* Reduced blur for better performance */
      }
      
      .hero { 
        gap: 1rem; 
        flex-direction: column;
      }
      
      .left, .right { 
        order: initial; 
        width: 100%;
        flex-basis: 100%;
      }
      
      .right { 
        margin-bottom: 1rem; 
      }
      
      .photo-frame { 
        width: 160px; 
        height: 160px; 
      }
      
      .balloons { 
        left: 5px; 
        bottom: -10px; 
      }
      
      .balloon { 
        width: 30px; 
        height: 42px; 
      }
      
      .button-row {
        flex-direction: column;
        align-items: center;
        gap: 1rem;
      }
      
      .btn {
        width: 100%;
        max-width: 280px;
        padding: 14px 20px;
      }
      
      .love-notes {
        padding: 1.2rem;
        width: 95%;
        max-width: 320px;
      }
      
      .timeline {
        margin-top: 1.5rem;
        padding-top: 1rem;
      }
      
      .memory-item {
        padding: 0.8rem;
      }
      
      /* Reduce hearts on mobile */
      .heart { 
        font-size: 14px; 
        animation-duration: 12s; /* Slower animation */
      }
    }

    @media (max-width: 480px) {
      .photo-frame { 
        width: 140px; 
        height: 140px; 
      }
      
      .balloon { 
        width: 28px; 
        height: 38px; 
      }
      
      .balloons { 
        gap: 6px; 
      }
      
      .card {
        backdrop-filter: blur(3px); /* Further reduced blur */
      }
    }

    /* Reduce motion for users who prefer it */
    @media (prefers-reduced-motion: reduce) {
      .heart, .balloon {
        animation: none;
      }
      
      .btn {
        transition: none;
      }
    }

    /* Performance optimizations */
    .photo-frame, .balloon, .heart {
      transform: translateZ(0); /* Force hardware acceleration */
    }

    /* Wish button effect - simplified for performance */
    .wish-btn {
      background: linear-gradient(135deg, #ff6b9d, #c084fc);
    }

    .wish-btn:active {
      background: linear-gradient(135deg, #ff8fb3, #d8a5fc);
    }
  </style>
</head>
<body>
  <!-- Floating hearts background -->
  <div class="floating-hearts" id="floatingHearts"></div>

  <canvas id="confetti"></canvas>
  <div class="stage">
    <div class="card" role="main" aria-label="Birthday greeting for Sameekshya">
      <div class="balloons" aria-hidden="true">
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>
      </div>

      <div class="hero">
        <div class="right">
          <div class="photo-frame" title="Your beautiful photo">
            <img id="photo" src="photo.jpg" alt="Beautiful photo of Sameekshya" onerror="this.style.opacity=0.1;this.style.background='linear-gradient(135deg, rgba(255,255,255,0.03), rgba(236,72,153,0.05))'"/>
          </div>
          <div class="controls">
            <label style="font-size:clamp(11px, 3vw, 13px);opacity:0.9;color:var(--lavender);text-align:center"> Gorgeous photo 💖</label>
          </div>
        </div>

        <div class="left">
          <div class="love-message">To the most beautiful soul in my world ✨</div>
          <span class="script">Another year of loving you</span>
          <h1 class="big-text">Happy Birthday<br><span id="name" style="background: linear-gradient(135deg, var(--rose), var(--gold)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Sameekshya</span> 💖</h1>
          <p class="sub">Every moment with you feels like a celebration. Here's to another year of adventures, laughter, and endless love. You make my world brighter every single day. 💕</p>

          <div class="button-row">
            <button class="btn wish-btn" id="celebrateBtn">Celebrate Our Love 🎊</button>
            <button class="btn ghost" id="toggleMusic">Play Our Song 🎵</button>
            <button class="btn ghost" id="loveNotesBtn">Love Notes 💌</button>
          </div>
        </div>
      </div>

      <!-- Memory Timeline -->
      <div class="timeline">
        <h3>Our Beautiful Journey Together 💕</h3>
        <div class="memory-item">
          <div class="memory-date">The Day We Met</div>
          <div class="memory-text">When I first saw your smile, I knew my heart had found its home 💝</div>
        </div>
        <div class="memory-item">
          <div class="memory-date">First Date</div>
          <div class="memory-text">That perfect evening when time stood still, just you and me ✨</div>
        </div>
        <div class="memory-item">
          <div class="memory-date">Today & Always</div>
          <div class="memory-text">Every day with you is a gift, every moment a treasure to keep forever 🌟</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Love Notes Popup -->
  <div class="love-notes" id="loveNotesPopup">
    <h3>Special Messages For You 💖</h3>
    <p id="loveNoteText">You are my sunshine, my moonlight, and all my stars combined. Happy Birthday, my love!</p>
    <button class="close-btn" onclick="closeLoveNotes()">Close 💕</button>
  </div>

  <!-- Optional audio -->
  <audio id="music" loop src="birthday.mp3"></audio>

  <script>
    // Performance check - reduce effects on slower devices
    const isLowEndDevice = navigator.hardwareConcurrency && navigator.hardwareConcurrency <= 4;
    const isMobile = window.innerWidth <= 768;
    
    // Optimized confetti engine
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    let W = canvas.width = innerWidth;
    let H = canvas.height = innerHeight;

    // Throttled resize handler
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        W = canvas.width = innerWidth;
        H = canvas.height = innerHeight;
      }, 100);
    });

    function rand(min, max) { 
      return Math.random() * (max - min) + min;
    }

    class Confetti {
      constructor() {
        this.x = rand(0, W);
        this.y = rand(-H, 0);
        this.size = rand(4, 8); // Smaller particles for better performance
        this.speed = rand(1, 3);
        this.angle = 0;
        this.spin = rand(-0.1, 0.1);
        
        const colors = ['#ff6b9d', '#c084fc', '#ffd166', '#ff9fbf'];
        this.color = colors[Math.floor(Math.random() * colors.length)];
        this.shape = Math.random() > 0.5 ? 'circle' : 'rect'; // Simpler shapes
      }
      
      update() {
        this.y += this.speed;
        this.x += Math.sin(this.y / 50) * 1; // Reduced movement
        this.angle += this.spin;
        if (this.y > H + 30) {
          this.y = rand(-50, 0);
          this.x = rand(0, W);
        }
      }
      
      draw() {
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.rotate(this.angle);
        ctx.fillStyle = this.color;
        
        if (this.shape === 'rect') {
          ctx.fillRect(-this.size/2, -this.size/2, this.size, this.size);
        } else {
          ctx.beginPath();
          ctx.arc(0, 0, this.size * 0.5, 0, Math.PI * 2);
          ctx.fill();
        }
        ctx.restore();
      }
    }

    let confs = [];
    function spawn(n = 50) { 
      // Reduce particle count on mobile/low-end devices
      const count = isMobile || isLowEndDevice ? Math.min(n, 30) : n;
      for (let i = 0; i < count; i++) {
        confs.push(new Confetti());
      }
    }
    
    function clearConfs() { 
      confs = []; 
    }

    let running = false;
    let animationId;
    
    function loop() {
      ctx.clearRect(0, 0, W, H);
      for (let c of confs) { 
        c.update(); 
        c.draw(); 
      }
      if (running) {
        animationId = requestAnimationFrame(loop);
      }
    }

    // Optimized floating hearts - fewer hearts, longer intervals
    function createFloatingHeart() {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.innerHTML = '💖';
      heart.style.left = Math.random() * 100 + '%';
      heart.style.animationDuration = (Math.random() * 2 + 8) + 's'; // Slower animation
      document.getElementById('floatingHearts').appendChild(heart);
      
      setTimeout(() => {
        if (heart.parentNode) heart.remove();
      }, 10000);
    }

    // Reduce heart frequency on mobile
    const heartInterval = isMobile ? 4000 : 3000;
    setInterval(createFloatingHeart, heartInterval);

    // Love notes
    const loveNotes = [
      "You are my sunshine, my moonlight, and all my stars combined. Happy Birthday, my love! 💫",
      "Every day with you feels like a beautiful dream I never want to wake up from 💭",
      "Your smile lights up my world brighter than a thousand candles on your cake 🕯️",
      "In you, I've found my best friend, my soulmate, and my forever love 💕",
      "You make ordinary moments feel extraordinary just by being you ✨",
      "Happy Birthday to the one who makes my heart skip a beat every single day 💓"
    ];

    let currentNoteIndex = 0;

    function showLoveNotes() {
      document.getElementById('loveNoteText').textContent = loveNotes[currentNoteIndex];
      document.getElementById('loveNotesPopup').style.display = 'block';
      currentNoteIndex = (currentNoteIndex + 1) % loveNotes.length;
    }

    function closeLoveNotes() {
      document.getElementById('loveNotesPopup').style.display = 'none';
    }

    // Button events with debouncing
    const celebrateBtn = document.getElementById('celebrateBtn');
    const toggleMusicBtn = document.getElementById('toggleMusic');
    const loveNotesBtn = document.getElementById('loveNotesBtn');
    const music = document.getElementById('music');

    let celebrateTimeout;
    celebrateBtn.addEventListener('click', () => {
      if (celebrateTimeout) return; // Prevent spam clicking
      
      celebrateTimeout = setTimeout(() => {
        celebrateTimeout = null;
      }, 2000);

      if (running) {
        cancelAnimationFrame(animationId);
      }
      
      running = true; 
      clearConfs(); 
      spawn(isMobile ? 40 : 80); 
      loop();
      
      // Create hearts with staggered timing
      const heartCount = isMobile ? 3 : 6;
      for (let i = 0; i < heartCount; i++) {
        setTimeout(createFloatingHeart, i * 400);
      }
      
      // Stop after reasonable time
      setTimeout(() => { 
        running = false;
        if (animationId) {
          cancelAnimationFrame(animationId);
        }
      }, isMobile ? 6000 : 8000);
    });

    toggleMusicBtn.addEventListener('click', () => {
      if (music.paused) { 
        music.play().then(() => { 
          toggleMusicBtn.textContent = 'Pause Our Song 🎵';
        }).catch(() => { 
          alert('Music needs permission - click again to play our special song! 🎶');
        }); 
      } else { 
        music.pause(); 
        toggleMusicBtn.textContent = 'Play Our Song 🎵';
      }
    });

    loveNotesBtn.addEventListener('click', showLoveNotes);

    // Initial light celebration
    spawn(isMobile ? 20 : 30);
    running = true;
    loop();
    setTimeout(() => { 
      running = false;
      if (animationId) {
        cancelAnimationFrame(animationId);
      }
    }, 2000);

    // Auto-show love note after delay
    setTimeout(showLoveNotes, 4000);

    // Prevent zoom on double tap for iOS
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (event) {
      const now = (new Date()).getTime();
      if (now - lastTouchEnd <= 300) {
        event.preventDefault();
      }
      lastTouchEnd = now;
    }, false);

    // Optimized touch interactions
    document.addEventListener('touchstart', function(e) {
      if (e.target.classList.contains('btn') || e.target.classList.contains('close-btn')) {
        e.target.style.transform = 'scale(0.95)';
      }
    }, {passive: true});

    document.addEventListener('touchend', function(e) {
      if (e.target.classList.contains('btn') || e.target.classList.contains('close-btn')) {
        setTimeout(() => {
          e.target.style.transform = '';
        }, 150);
      }
    }, {passive: true});

    // Cleanup on page unload
    window.addEventListener('beforeunload', () => {
      if (animationId) {
        cancelAnimationFrame(animationId);
      }
      running = false;
    });

    // Optional: Reduce animations if battery is low
    if ('getBattery' in navigator) {
      navigator.getBattery().then(battery => {
        if (battery.level < 0.2) {
          // Reduce effects when battery is low
          document.querySelectorAll('.heart, .balloon').forEach(el => {
            el.style.animationPlayState = 'paused';
          });
        }
      });
    }
  </script>
</body>
</html>
