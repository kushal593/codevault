<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Birthday My Love Sameekshya üíñ</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800&family=Parisienne&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1: #0f0727; /* deeper purple navy */
      --bg2: #4c1d95; /* royal purple */
      --bg3: #ec4899; /* pink accent */
      --card: rgba(255,255,255,0.08);
      --accent: #ff6b9d;
      --gold: #ffd166;
      --rose: #ff69b4;
      --lavender: #e879f9;
    }
    *{box-sizing: border-box}
    html,body{height:100%;margin:0;font-family:Montserrat, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}

    body{
      background: 
        radial-gradient(circle at 20% 80%, rgba(236, 72, 153, 0.15), transparent 40%),
        radial-gradient(circle at 80% 20%, rgba(168, 85, 247, 0.15), transparent 40%),
        radial-gradient(circle at 40% 40%, rgba(255, 215, 102, 0.08), transparent 40%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      color: #fff;
      -webkit-font-smoothing:antialiased;
      overflow-x:hidden;
      min-height:100vh;
    }


    .credit-label {
      position: relative;
      margin: 0 auto;
      width: fit-content;
      margin-bottom: 1rem;
      top: 15px;
      right: 15px;
      z-index: 10;
      background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 12px;
      padding: 8px 12px;
      font-size: 12px;
      font-weight: 600;
      color: var(--gold);
      text-shadow: 0 2px 8px rgba(255, 209, 102, 0.3);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
    }

    .credit-label:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.4);
      background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.08));
    }

    /* Floating hearts animation */
    .floating-hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }

    .heart {
      position: absolute;
      color: var(--rose);
      font-size: 18px;
      opacity: 0.7;
      animation: floatUp 8s linear infinite;
    }

    @keyframes floatUp {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.7;
      }
      90% {
        opacity: 0.7;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }

    /* Center card */
    .stage{
      min-height:100vh;display:flex;align-items:center;justify-content:center;
      padding:1rem;position:relative;z-index:2;
    }

    .card{
      width:100%;max-width:900px;border-radius:20px;padding:1.5rem;
      backdrop-filter: blur(20px);
      background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      box-shadow: 
        0 15px 40px rgba(2,6,23,0.7),
        inset 0 1px 0 rgba(255,255,255,0.1);
      position:relative;overflow:visible;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .hero{
      display:flex;gap:1.5rem;align-items:center;flex-wrap:wrap;
    }

    .left{
      flex:1 1 100%;min-width:280px;position:relative;order:2;
    }

    .love-message {
      font-family: 'Dancing Script', cursive;
      font-size: clamp(16px, 4vw, 20px);
      color: var(--lavender);
      margin-bottom: 0.5rem;
      font-weight: 700;
      text-shadow: 0 2px 10px rgba(232, 121, 249, 0.3);
      text-align: center;
    }

    .big-text{
      font-size: clamp(28px, 8vw, 64px);
      line-height:0.95;
      font-weight:800;
      letter-spacing: -1px;
      margin:0.5rem 0;
      background: linear-gradient(135deg, #fff, var(--gold), var(--rose));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 8px 32px rgba(0,0,0,0.6);
      text-align: center;
    }

    .script{
      font-family: 'Parisienne', cursive;
      font-size: clamp(20px, 5vw, 38px);
      color: var(--gold);
      display:block;margin-bottom:0.8rem;
      text-shadow: 0 6px 26px rgba(255, 209, 102, 0.4);
      text-align: center;
    }

    .sub{
      color: #f1f5f9;opacity:0.95;margin-top:1rem;
      font-size:clamp(14px,3.5vw,17px);
      line-height: 1.6;
      text-align: center;
      padding: 0 0.5rem;
    }

    .right{
      flex:1 1 100%;order:1;display:flex;flex-direction:column;
      align-items:center;justify-content:center;margin-bottom:1rem;
    }

    .photo-frame{
      width:200px;height:200px;border-radius:20px;overflow:hidden;
      border:3px solid rgba(255,255,255,0.15);
      box-shadow:
        0 12px 30px rgba(0,0,0,0.4),
        0 0 0 6px rgba(236, 72, 153, 0.1);
      display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg, rgba(255,255,255,0.05), rgba(0,0,0,0.02));
      position: relative;
    }

    .photo-frame::before {
      content: '';
      position: absolute;
      inset: -2px;
      background: linear-gradient(45deg, var(--rose), var(--lavender), var(--gold));
      border-radius: 22px;
      z-index: -1;
      opacity: 0.6;
    }

    .photo-frame img{width:100%;height:100%;object-fit:cover;display:block}

    .controls{
      margin-top:1rem;display:flex;gap:0.6rem;flex-wrap:wrap;
      justify-content:center;align-items:center;
    }

    .btn{
      background:linear-gradient(135deg, var(--accent), #ff9fbf);
      border:none;padding:10px 16px;border-radius:12px;color:#111;
      font-weight:700;cursor:pointer;
      box-shadow:0 6px 16px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      font-size: clamp(12px, 3vw, 14px);
      min-height: 44px;
      white-space: nowrap;
    }
    .btn:hover, .btn:active {
      transform: translateY(-2px);
      box-shadow:0 8px 20px rgba(0,0,0,0.4);
    }
    .btn.ghost{
      background:transparent;color:#fff;
      border:1px solid rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
    }
    .btn.ghost:hover, .btn.ghost:active {
      background: rgba(255,255,255,0.1);
    }

    .button-row {
      display: flex;
      gap: 0.6rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 1rem;
    }

    /* Enhanced confetti canvas */
    canvas#confetti{
      position:fixed;inset:0;z-index:3;pointer-events:none;
    }

    /* Decorative elements - mobile optimized */
    .balloons{
      position:absolute;bottom:-15px;left:8px;z-index:4;
      display:flex;gap:8px;
    }
    .balloon{
      width:40px;height:55px;border-radius:50% 50% 46% 46%;position:relative;
      transform-origin:center bottom;animation: float 4s ease-in-out infinite;
      box-shadow:0 8px 16px rgba(0,0,0,0.3) inset;
    }
    .balloon::after{
      content:'';position:absolute;left:50%;bottom:-15px;width:1px;height:15px;
      background:rgba(255,255,255,0.15);transform:translateX(-50%);
    }
    .balloon:nth-child(1){background:linear-gradient(180deg,#ff9fb1,#ff6b6b);animation-delay:0s}
    .balloon:nth-child(2){background:linear-gradient(180deg,#ffd6a5,#ffb86b);animation-delay:0.6s}
    .balloon:nth-child(3){background:linear-gradient(180deg,#caffbf,#6ef0a6);animation-delay:1.1s}
    .balloon:nth-child(4){background:linear-gradient(180deg,#e879f9,#c084fc);animation-delay:1.6s}

    @keyframes float{
      0%{transform:translateY(0) rotate(-2deg)}
      50%{transform:translateY(-8px) rotate(2deg)}
      100%{transform:translateY(0) rotate(-2deg)}
    }

    /* Love notes popup - mobile optimized */
    .love-notes {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, rgba(0,0,0,0.95), rgba(76, 29, 149, 0.95));
      backdrop-filter: blur(20px);
      border-radius: 16px;
      padding: 1.5rem;
      max-width: 340px;
      width: 90%;
      text-align: center;
      z-index: 100;
      border: 1px solid rgba(255,255,255,0.2);
      display: none;
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
    }

    .love-notes h3 {
      color: var(--rose);
      font-family: 'Dancing Script', cursive;
      font-size: clamp(22px, 6vw, 26px);
      margin-bottom: 1rem;
    }

    .love-notes p {
      color: #f1f5f9;
      line-height: 1.6;
      margin-bottom: 1.5rem;
      font-style: italic;
      font-size: clamp(14px, 3.5vw, 16px);
    }

    .close-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      min-height: 44px;
    }

    /* Memory lane timeline - mobile optimized */
    .timeline {
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .timeline h3 {
      font-family: 'Dancing Script', cursive;
      font-size: clamp(20px, 5vw, 24px);
      color: var(--gold);
      text-align: center;
      margin-bottom: 1rem;
    }

    .memory-item {
      background: rgba(255,255,255,0.05);
      padding: 1rem;
      border-radius: 12px;
      margin-bottom: 0.8rem;
      border-left: 3px solid var(--rose);
      backdrop-filter: blur(10px);
    }

    .memory-date {
      color: var(--lavender);
      font-size: clamp(11px, 3vw, 12px);
      font-weight: 600;
    }

    .memory-text {
      color: #f1f5f9;
      font-size: clamp(13px, 3.5vw, 14px);
      margin-top: 0.3rem;
      line-height: 1.5;
    }

    /* Footer note - mobile optimized */
    .note{
      position:absolute;left:10px;bottom:10px;
      font-size: clamp(10px, 2.5vw, 11px);
      color:rgba(255,255,255,0.6);max-width:280px;
      line-height: 1.4;
    }

    /* Mobile-specific responsive rules */
    @media (max-width: 768px) {
      .stage { padding: 0.5rem; }
      
      .card { 
        padding: 1rem; 
        border-radius: 16px; 
        margin: 0.5rem;
      }
      
      .hero { 
        gap: 1rem; 
        flex-direction: column;
      }
      
      .left, .right { 
        order: initial; 
        width: 100%;
        flex-basis: 100%;
      }
      
      .right { 
        margin-bottom: 1rem; 
      }
      
      .photo-frame { 
        width: 180px; 
        height: 180px; 
      }
      
      .balloons { 
        left: 5px; 
        bottom: -10px; 
      }
      
      .balloon { 
        width: 35px; 
        height: 48px; 
      }
      
      .button-row {
        flex-direction: column;
        align-items: center;
        gap: 0.8rem;
      }
      
      .btn {
        width: 100%;
        max-width: 280px;
      }
      
      .love-notes {
        padding: 1.2rem;
        width: 95%;
        max-width: 320px;
      }
      
      .timeline {
        margin-top: 1.5rem;
        padding-top: 1rem;
      }
      
      .memory-item {
        padding: 0.8rem;
      }
      
      .note {
        position: relative;
        left: auto;
        bottom: auto;
        margin-top: 1rem;
        text-align: center;
        max-width: 100%;
      }
    }

    @media (max-width: 480px) {
      .heart { font-size: 16px; }
      
      .photo-frame { 
        width: 160px; 
        height: 160px; 
      }
      
      .balloon { 
        width: 30px; 
        height: 42px; 
        gap: 6px;
      }
      
      .balloons { gap: 6px; }
    }

    /* Sparkles enhanced - mobile friendly */
    .sparkle{
      position:absolute;z-index:1;width:12px;height:12px;border-radius:50%;
      background:rgba(255,255,255,0.9);filter:blur(3px);opacity:0.8;
      mix-blend-mode:screen;pointer-events:none;
    }

    @keyframes blink{0%,100%{opacity:0.3}50%{opacity:1}}

    /* Wish button special effect */
    .wish-btn {
      background: linear-gradient(135deg, #ff6b9d, #c084fc, #ffd166);
      background-size: 200% 200%;
      animation: gradientShift 3s ease infinite;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Touch feedback */
    .btn:active {
      transform: translateY(0px);
      transition: all 0.1s ease;
    }

    /* Better touch targets */
    .btn, .close-btn {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    .confetti {
    position: absolute;
    top: -10px;
    will-change: transform, opacity;
  }

  </style>
</head>
<body>

  
  <!-- Floating hearts background -->
  <div class="floating-hearts" id="floatingHearts"></div>

  <canvas id="confetti"></canvas>
  <div class="stage">
    <div class="card" role="main" aria-label="Birthday greeting for Sameekshya">
      <div class="balloons" aria-hidden="true">
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>
      </div>

      <div class="hero">
        <div class="right">
          <div class="photo-frame" title="Your beautiful photo">
            <img id="photo" src="photo.jpg" alt="Beautiful photo of Sameekshya" onerror="this.style.opacity=0.1;this.style.background='linear-gradient(135deg, rgba(255,255,255,0.03), rgba(236,72,153,0.05))'"/>
          </div>
          <div class="controls">
            <label style="font-size:clamp(11px, 3vw, 13px);opacity:0.9;color:var(--lavender);text-align:center"> Gorgeous photo üíñ</label>
          </div>
        </div>

        <div class="left">
          <div class="love-message">To the most beautiful soul in my world ‚ú®</div>
          <span class="script">Wishing you endless smiles and beautiful moments ahead üíê</span>
          <h1 class="big-text">Happy Birthday<br><span id="nffame" style="background: linear-gradient(135deg, var(--rose), var(--gold)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Sameekshya</span> üíñ</h1>
          <p class="sub">Watching you grow, laugh, and shine has been something truly special. I hope your day is filled with laughter, surprises, and everything that makes your heart happy.</p>

          <div class="button-row">
            <button class="btn wish-btn" id="celebrateBtn">Let‚Äôs Celebrate You üéä</button>
            <button class="btn ghost" id="toggleMusic">Play Song üéµ</button>
            <button class="btn ghost" id="loveNotesBtn">A Little Note üíå</button>
          </div>
        </div>
      </div>

      <!-- Memory Timeline -->
      <div class="timeline">
        <h3>Some Moments I‚Äôll Always Remember ‚ú®</h3>
        <div class="memory-item">
          <div class="memory-date">The Times We Talked</div>
          <div class="memory-text">Every conversation, even the small ones, always leaves me smiling ‚ú®</div>
        </div>
        <div class="memory-item">
          <div class="memory-date">Today & Always</div>
          <div class="memory-text">You‚Äôre the only one I truly wish to see smiling always and forever üíñ</div>
        </div>
      </div>
    <div class="credit-label">Made By: Kushal</div>
      
    </div>
  </div>

  <!-- Love Notes Popup -->
  <div class="love-notes" id="loveNotesPopup">
    <h3>Special Messages For You üíñ</h3>
    <p id="loveNoteText">You are my sunshine, my moonlight, and all my stars combined. Happy Birthday, my love!</p>
    <button class="close-btn" onclick="closeLoveNotes()">Close üíï</button>
  </div>

  <!-- Optional audio -->
  <audio id="music" loop src="birthday.mp3"></audio>

  <script>
    // Enhanced confetti engine
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    let W = canvas.width = innerWidth;
    let H = canvas.height = innerHeight;

    window.addEventListener('resize', ()=>{W=canvas.width=innerWidth;H=canvas.height=innerHeight})

    function rand(min,max){ return Math.random()*(max-min)+min }

    class Confetti{
      constructor(){
  const bounds = getConfettiBounds();
  this.x = rand(bounds.minX, bounds.maxX);
  this.y = rand(bounds.minY, bounds.minY + 50);
  this.size = rand(6,14);
  this.speed = rand(3.5,4);
  this.angle = rand(0,360);
  this.spin = rand(-0.2,0.2);
  this.bounds = bounds;
  
  const colors = ['#ff6b9d', '#c084fc', '#ffd166', '#ff9fbf', '#e879f9', '#ffb86b'];
  this.color = colors[Math.floor(Math.random() * colors.length)];
  
  const shapes = ['heart', 'circle', 'star', 'rect'];
  this.shape = shapes[Math.floor(Math.random() * shapes.length)];
}
      
      update(){
  this.y += this.speed;
  this.x += Math.sin(this.y/30)*2;
  this.angle += this.spin;
  
  // Reset position when confetti goes below the confetti area
  if(this.y > this.bounds.maxY){
    this.y = rand(this.bounds.minY, this.bounds.minY + 50);
    this.x = rand(this.bounds.minX, this.bounds.maxX);
  }
  
  // Keep confetti within horizontal bounds
  if(this.x < this.bounds.minX || this.x > this.bounds.maxX) {
    this.x = rand(this.bounds.minX, this.bounds.maxX);
  }
}
      
      draw(){
        if(this.x < this.bounds.minX || this.x > this.bounds.maxX || 
     this.y < this.bounds.minY || this.y > this.bounds.maxY) {
    return;
  }
        ctx.save();
        ctx.translate(this.x,this.y);
        ctx.rotate(this.angle);
        ctx.fillStyle=this.color;
        
        if(this.shape==='heart') {
          // Draw heart shape
          const s = this.size * 0.6;
          ctx.beginPath();
          ctx.arc(-s/4, -s/4, s/4, 0, Math.PI * 2);
          ctx.arc(s/4, -s/4, s/4, 0, Math.PI * 2);
          ctx.fill();
          ctx.beginPath();
          ctx.moveTo(0, 0);
          ctx.lineTo(-s/2, -s/4);
          ctx.lineTo(0, s/2);
          ctx.lineTo(s/2, -s/4);
          ctx.closePath();
          ctx.fill();
        } else if(this.shape==='star') {
          // Draw star
          const spikes = 5;
          const outerRadius = this.size * 0.5;
          const innerRadius = outerRadius * 0.4;
          ctx.beginPath();
          for(let i = 0; i < spikes * 2; i++) {
            const radius = i % 2 === 0 ? outerRadius : innerRadius;
            const angle = (i * Math.PI) / spikes;
            const x = Math.cos(angle) * radius;
            const y = Math.sin(angle) * radius;
            if(i === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
          }
          ctx.closePath();
          ctx.fill();
        } else if(this.shape==='rect') {
          ctx.fillRect(-this.size/2,-this.size/2,this.size,this.size*0.6);
        } else {
          ctx.beginPath();
          ctx.arc(0,0,this.size*0.5,0,Math.PI*2);
          ctx.fill();
        }
        ctx.restore();
      }
    }

    let confs = [];
    function spawn(n=2){ for(let i=0;i<n;i++) confs.push(new Confetti()) }
    function clearConfs(){ confs=[]; }

    let running=false;
let lastTime = 0;
function loop(currentTime){
  // Throttle to 30fps on mobile for smoother performance
  const isMobile = window.innerWidth <= 768;
  const targetFPS = isMobile ? 30 : 60;
  const interval = 1000 / targetFPS;
  
  if (currentTime - lastTime >= interval) {
    ctx.clearRect(0,0,W,H);
    for(let c of confs){ c.update(); c.draw(); }
    lastTime = currentTime;
  }
  
  if(running) requestAnimationFrame(loop);
}

    // Floating hearts
    function createFloatingHeart() {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.innerHTML = 'üíñ';
      heart.style.left = Math.random() * 100 + '%';
      heart.style.animationDuration = (Math.random() * 3 + 5) + 's';
      heart.style.opacity = Math.random() * 0.5 + 0.3;
      document.getElementById('floatingHearts').appendChild(heart);
      
      setTimeout(() => {
        if(heart.parentNode) heart.remove();
      }, 8000);
    }

    // Create hearts periodically
    setInterval(createFloatingHeart, 2000);

    // Love notes
    const loveNotes = [
      "There‚Äôs something about you maybe it‚Äôs your kindness, your laugh, or just you being you that always stays in my mind üå∏"
    ];

    let currentNoteIndex = 0;

    function showLoveNotes() {
      document.getElementById('loveNoteText').textContent = loveNotes[currentNoteIndex];
      document.getElementById('loveNotesPopup').style.display = 'block';
      currentNoteIndex = (currentNoteIndex + 1) % loveNotes.length;
    }

    function closeLoveNotes() {
      document.getElementById('loveNotesPopup').style.display = 'none';
    }

    // Button events
    const celebrateBtn = document.getElementById('celebrateBtn');
    const toggleMusicBtn = document.getElementById('toggleMusic');
    const loveNotesBtn = document.getElementById('loveNotesBtn');
    const music = document.getElementById('music');
    const downloadBtn = document.getElementById('downloadBtn');

    celebrateBtn.addEventListener('click', ()=>{
  const isMobile = window.innerWidth <= 768;
  const confettiCount = isMobile ? 40 : 150; // Much fewer particles on mobile
  
  running = true; 
  clearConfs(); 
  spawn(confettiCount); 
  loop();
  
  // Create extra hearts
  const heartCount = isMobile ? 4 : 8; // Fewer hearts on mobile too
  for(let i = 0; i < heartCount; i++) {
    setTimeout(createFloatingHeart, i * 300); // Slower spawn rate
  }
  setTimeout(()=>{ running=false; }, 8000); // Shorter duration
});

    toggleMusicBtn.addEventListener('click', ()=>{
      if(music.paused){ 
        music.play().then(()=>{ 
          toggleMusicBtn.textContent='Pause Song üéµ' 
        }).catch(()=>{ 
          alert('Music needs permission - click again to play special song! üé∂')
        }); 
      } else { 
        music.pause(); 
        toggleMusicBtn.textContent='Play Song üéµ' 
      }
    });

    loveNotesBtn.addEventListener('click', showLoveNotes);

    downloadBtn.addEventListener('click', ()=>{
      alert('üí° To save this beautiful moment: Right-click on the page ‚Üí "Save as..." or use Print ‚Üí "Save as PDF" for the best quality! You can also take a screenshot to capture our special birthday message. üì∏üíï')
    });

    // Continuous sparkles - never stop!
    let sparkleInterval;
    function makeSparkles(){
  const isMobile = window.innerWidth <= 768;
  const sparkleCount = isMobile ? 6 : 12; // Half the sparkles on mobile
  
  for(let i=0;i<sparkleCount;i++){
    const s = document.createElement('div');
    s.className='sparkle';
    s.style.left=rand(5,95)+'%';
    s.style.top=rand(10,80)+'%';
    s.style.width=rand(8,16)+'px';
    s.style.height=s.style.width;
    s.style.opacity=rand(0.3,0.9);
    s.style.animation=`blink ${rand(2,5)}s ease-in-out infinite`;
    s.style.background = `hsl(${rand(300,360)}, 80%, 80%)`;
    document.body.appendChild(s);
    setTimeout(()=>s.remove(),3000); // Remove faster on mobile
  }
}

    // Start continuous sparkles
    function startSparkles() {
      makeSparkles();
      sparkleInterval = setInterval(makeSparkles, 3000);
    }

    // Initial celebration
const isMobile = window.innerWidth <= 768;
const initialCount = isMobile ? 30 : 50; // Fewer initial confetti on mobile
spawn(initialCount); running=true; loop();
setTimeout(()=>{ running=false; }, isMobile ? 2000 : 3000); // Shorter on mobile

    // Start sparkles immediately and keep them going
    startSparkles();

    // Keyboard shortcuts
    window.addEventListener('keydown', (e)=>{ 
      if(e.key.toLowerCase()==='c') celebrateBtn.click(); 
      if(e.key.toLowerCase()==='m') toggleMusicBtn.click();
      if(e.key.toLowerCase()==='l') loveNotesBtn.click();
    });

    // Name editing
    document.getElementById('name').addEventListener('click', ()=>{
      const newName = prompt('Change the name (though she\'s perfect as she is! üíñ):', document.getElementById('name').textContent);
      if(newName) document.getElementById('name').textContent = newName;
    });

    // Auto-show love note after 3 seconds
    setTimeout(showLoveNotes, 3000);

    // Prevent zoom on double tap for iOS
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (event) {
      const now = (new Date()).getTime();
      if (now - lastTouchEnd <= 300) {
        event.preventDefault();
      }
      lastTouchEnd = now;
    }, false);

    // Enhanced mobile touch interactions
    document.addEventListener('touchstart', function(e) {
      // Add touch feedback for better mobile experience
      if(e.target.classList.contains('btn')) {
        e.target.style.transform = 'scale(0.95)';
      }
    }, {passive: true});

    document.addEventListener('touchend', function(e) {
      // Reset touch feedback
      if(e.target.classList.contains('btn')) {
        setTimeout(() => {
          e.target.style.transform = '';
        }, 150);
      }
    }, {passive: true});

    // Performance optimization for mobile
    if('serviceWorker' in navigator) {
      // Optional: Add service worker for better performance
    }

    // Reduce particle count on lower-end devices
    const isLowEndDevice = navigator.hardwareConcurrency && navigator.hardwareConcurrency <= 4;
    if(isLowEndDevice) {
      // Reduce confetti count for better performance
      celebrateBtn.addEventListener('click', ()=>{
        running = true; clearConfs(); spawn(80); loop();
        for(let i = 0; i < 5; i++) {
          setTimeout(createFloatingHeart, i * 300);
        }
        setTimeout(()=>{ running=false; }, 8000);
      });
    }




    // Add this new function after the canvas setup
function getConfettiBounds() {
  const isMobile = window.innerWidth <= 768;
  if (isMobile) {
    // For mobile: limit confetti to phone screen area centered on screen
    const confettiWidth = Math.min(W, 450);
    const confettiHeight = Math.min(H, 800);
    const offsetX = (W - confettiWidth) / 2;
    const offsetY = (H - confettiHeight) / 2;
    
    return {
      minX: offsetX,
      maxX: offsetX + confettiWidth,
      minY: offsetY - 100,
      maxY: offsetY + confettiHeight + 100,
      width: confettiWidth,
      height: confettiHeight
    };
  } else {
    // For desktop: use full screen
    const confettiWidth = Math.min(W, 450);
    const confettiHeight = Math.min(H, 800);
    const offsetX = (W - confettiWidth) / 2;
    const offsetY = (H - confettiHeight) / 2;
    
    return {
      minX: offsetX,
      maxX: offsetX + confettiWidth,
      minY: offsetY - 100,
      maxY: offsetY + confettiHeight + 100,
      width: confettiWidth,
      height: confettiHeight
    };
  }
}
  </script>
</body>
</html>
